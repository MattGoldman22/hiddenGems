<!doctype html>
<html>
<head>
  <meta content="width=device-width, initial-scale=1, maximum-width=device-width, maximum-scale=1" name="viewport">
  <link rel="stylesheet" type="text/css" href="form.css">

 <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Custom styles for this template -->
  <link href="css/landing-page.min.css" rel="stylesheet">

  <script src='asyncReq.js'></script>
<script>
var main = function(){
  // check whether user is logged in
  loadFile("/loginStatus", function(data){
    if(data === "0"){
      window.location.href='./login.html'
      return;
    }
    else{
  //    document.getElementById("accountInfo").innerHTML = data;
    }
  });
}

var doLogout = function()
{
  var x = confirm("Logout now?")
  if(x){
    loadFile("./logout", function(d){window.location.reload()})
  }
}
function submitGem(){
  var url = "./addProject?name=" + encodeURIComponent(document.getElementById("fName").value)
  url +="&location=" + encodeURIComponent(document.getElementById("lName").value)
  url +="&email=" + encodeURIComponent(document.getElementById("eAddress").value)
  url +="&phonenumber=" + encodeURIComponent(document.getElementById("pNumber").value)
  url +="&address=" + encodeURIComponent(document.getElementById("address").value)
  url +="&campus=" + encodeURIComponent(document.getElementById("campus").value)
  url +="&comments=" + encodeURIComponent(document.getElementById("comments").value)
  url +="&publish=" + false

  loadFile(url,function(data){

  })
}

<?php
$target_dir = "uploads/";
$target_file = $target_dir . basename($_FILES["fileToUpload"]["name"]);
$uploadOk = 1;
$imageFileType = strtolower(pathinfo($target_file,PATHINFO_EXTENSION));

// Check if image file is a actual image or fake image
if(isset($_POST["submit"])) {
  $check = getimagesize($_FILES["fileToUpload"]["tmp_name"]);
  if($check !== false) {
    echo "File is an image - " . $check["mime"] . ".";
    $uploadOk = 1;
  } else {
    echo "File is not an image.";
    $uploadOk = 0;
  }
}

// Check if file already exists
if (file_exists($target_file)) {
  echo "Sorry, file already exists.";
  $uploadOk = 0;
}

// Check file size
if ($_FILES["fileToUpload"]["size"] > 500000) {
  echo "Sorry, your file is too large.";
  $uploadOk = 0;
}

// Allow certain file formats
if($imageFileType != "jpg" && $imageFileType != "png" && $imageFileType != "jpeg"
&& $imageFileType != "gif" ) {
  echo "Sorry, only JPG, JPEG, PNG & GIF files are allowed.";
  $uploadOk = 0;
}

// Check if $uploadOk is set to 0 by an error
if ($uploadOk == 0) {
  echo "Sorry, your file was not uploaded.";
// if everything is ok, try to upload file
} else {
  if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file)) {
    echo "The file ". htmlspecialchars( basename( $_FILES["fileToUpload"]["name"])). " has been uploaded.";
  } else {
    echo "Sorry, there was an error uploading your file.";
  }
}
?>
</script>
</head>
<body onload='main()'>
   <!-- Navigation -->
  <nav class="navbar navbar-light bg-light static-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">Hidden Gems</a>

          <a clss="navbar-brand" href="Tempe.html">Tempe</a>
          <a clss="navbar-brand" href="Poly.html">Polytechnic</a>
          <a clss="navbar-brand" href="Phoenix.html">Downtown Phoenix</a>
          <a clss="navbar-brand" href="West.html">West</a>
      <a class="btn btn-primary" href="account.html">Submit Hidden Gem</a>
    </div>

  </nav>

<img src="asu_logo_1.png">
<section id="form">
      <label for="fName">First & Last Name</label>
      <input type="text" name="first name" required="required" id="fName">

      <label for="lName">Name of Location</label>
      <input type="text" name="last name" required="required" id="lName">

      <label for="eAddress">Email Address</label>
      <input type="text" name="email address" required="required" id="eAddress">

      <label for="pNumber">Phone Number</label>
      <input type="text" name="telephone number" required="required"  maxlength="12" id="pNumber">

      <label>Address for Hidden Gem</label>
      <input type="address" name="address" required="required" id="address">
      <label>Campus</label>
      <select id="campus">
        <option value="Tempe">Tempe</option>
        <option value="Downtown Phoenix">Downtown Phoenix</option>
        <option value="Polytechnic">Polytechnic</option>
        <option value="West">West</option>
      </select><br>

      <label for="upload">Upload Images</label>
      <input type="file" name="fileToUpload" id="fileToUpload">

      <label for="comments">Comments</label>
      <textarea name="myComments" rows="2" cols="30" id="comments"></textarea>

      <button type="submit" value="Submit" onclick="submitGem()">Submit</button>
      <button type="reset" name="Reset" onclick="resetGem()">Reset</button>
</section>

<div class='container'>
  <!-- put app here -->
  <div id='accountInfo'>
  </div>
</div>
  <!-- put logout button anywhere -->
<button onclick='doLogout()'>Logout</button>
</body>
</html>
